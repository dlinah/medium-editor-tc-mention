!function(e,t){if("object"==typeof exports&&"object"==typeof module)module.exports=t(require("MediumEditor"));else if("function"==typeof define&&define.amd)define(["MediumEditor"],t);else{var n=t("object"==typeof exports?require("MediumEditor"):e.MediumEditor);for(var i in n)("object"==typeof exports?exports:e)[i]=n[i]}}(this,function(e){return function(e){function t(i){if(n[i])return n[i].exports;var a=n[i]={exports:{},id:i,loaded:!1};return e[i].call(a.exports,a,a.exports,t),a.loaded=!0,a.exports}var n={};return t.m=e,t.c=n,t.p="",t(0)}([function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}function a(e,t){var n,i,a=e.parentNode;for(s["default"].util.unwrap(e,t),i=a.lastChild;n=i.previousSibling;)3===i.nodeType&&3===n.nodeType&&(n.textContent+=i.textContent,a.removeChild(i)),i=n}Object.defineProperty(t,"__esModule",{value:!0}),t.unwrapForTextNode=a;var o=n(1),s=i(o),l=50;t.atKeyCode=l;var r=51;t.hashKeyCode=r;var d=s["default"].Extension.extend({name:"mention",tagName:"strong",renderPanelContent:function(){},activeTriggerList:["@"],triggerClassNameMap:{"#":"medium-editor-mention-hash","@":"medium-editor-mention-at"},init:function(){this.mentionPanel=this.createPanel(),this.getEditorOption("elementsContainer").appendChild(this.mentionPanel),this.subscribe("editableKeydown",this.handleKeydown.bind(this)),this.trigger=null,this.triggerClassName=null,this.activeMentionAt=null},createPanel:function(){var e=this.document.createElement("div");return e.className="medium-editor-mention-panel",e.innerHTML=this.getTemplate(),e},getTemplate:function(){return"<p>\nYour mention implementation\n</p>"},destroy:function(){this.mentionPanel&&(this.mentionPanel.parentNode&&this.mentionPanel.parentNode.removeChild(this.mentionPanel),delete this.mentionPanel)},handleKeydown:function(e){switch(s["default"].util.getKeyCode(e)){case s["default"].util.keyCode.ESCAPE:this.hidePanel();break;case s["default"].util.keyCode.SPACE:this.hidePanel();break;case s["default"].util.keyCode.ENTER:this.hidePanel();break;case s["default"].util.keyCode.BACKSPACE:var t=s["default"].selection.getSelectionRange(this.document),n=t.startOffset,i=t.endOffset;1===n&&1===i&&this.hidePanel();break;case l:-1!==this.activeTriggerList.indexOf("@")?this.handleTriggerKeydown("@",e):this.updatePanelContentWithDelay();break;case r:-1!==this.activeTriggerList.indexOf("#")?this.handleTriggerKeydown("#",e):this.updatePanelContentWithDelay();break;default:this.updatePanelContentWithDelay()}},handleTriggerKeydown:function(e,t){this.trigger=e,this.triggerClassName=this.triggerClassNameMap[this.trigger],t.preventDefault();var n=s["default"].selection.getSelectionStart(this.document);n.classList.contains(this.triggerClassName)||(this.hidePanel(),this.showPanel(),this.positionPanel(),this.updatePanelContentWithDelay())},handleSelectMention:function(e){if(e){var t=this.activeMentionAt.childNodes[0];t.textContent=e,s["default"].selection.select(this.document,t,e.length),this.hidePanel()}else this.hidePanel()},hidePanel:function(){this.mentionPanel.classList.remove("medium-editor-mention-panel-active"),this.activeMentionAt&&(this.base.saveSelection(),a(this.activeMentionAt,this.document),this.base.restoreSelection(),this.activeMentionAt=null)},showPanel:function(){var e="<"+this.tagName+' class="'+this.triggerClassName+'">'+this.trigger+"</"+this.tagName+">";s["default"].util.insertHTMLCommand(this.document,e),this.mentionPanel.classList.contains("medium-editor-mention-panel-active")||(this.activeMentionAt=this.document.querySelector("."+this.triggerClassName),this.mentionPanel.classList.add("medium-editor-mention-panel-active"))},positionPanel:function(){var e=this.activeMentionAt.getBoundingClientRect(),t=e.bottom,n=e.left,i=this.window.pageYOffset;this.mentionPanel.style.top=t+i+"px",this.mentionPanel.style.left=n+"px"},updatePanelContent:function(){var e=this.activeMentionAt.textContent;this.renderPanelContent(this.mentionPanel,e,this.handleSelectMention.bind(this))},updatePanelContentWithDelay:function(){this.activeMentionAt&&this.activeMentionAt===s["default"].selection.getSelectionStart(this.document)&&this.base.delay(this.updatePanelContent.bind(this))}});t.TCMention=d,t["default"]=d},function(t,n){t.exports=e}])});
//# sourceMappingURL=index.min.js.map