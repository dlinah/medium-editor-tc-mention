{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///index.min.js","webpack:///webpack/bootstrap e563c065def9bca6d92e","webpack:///./src/index.js","webpack:///external \"MediumEditor\""],"names":["root","factory","exports","module","require","define","amd","a","i","this","__WEBPACK_EXTERNAL_MODULE_1__","modules","__webpack_require__","moduleId","installedModules","id","loaded","call","m","c","p","_interopRequireDefault","obj","__esModule","default","unwrapForTextNode","el","doc","prevNode","currentNode","parentNode","_mediumEditor2","util","unwrap","lastChild","previousSibling","nodeType","textContent","removeChild","Object","defineProperty","value","_mediumEditor","atKeyCode","hashKeyCode","TCMention","Extension","extend","name","extraClassName","extraActiveClassName","tagName","renderPanelContent","destroyPanelContent","activeTriggerList","triggerClassNameMap","#","@","hideOnBlurDelay","init","initMentionPanel","attachEventHandlers","destroy","mentionPanel","document","createElement","classList","add","getEditorOption","appendChild","subscribe","handleBlur","bind","handleFocus","handleKeyup","hideOnBlurDelayId","setTimeout","hidePanel","clearTimeout","event","keyCode","getKeyCode","isSpace","SPACE","getWordFromSelection","target","indexOf","trigger","word","length","showPanel","remove","activeMentionAt","base","saveSelection","restoreSelection","initialDiff","getWordPosition","_x","_x2","_again","position","diff","prevText","undefined","trim","_MediumEditor$selection$getSelectionRange","selection","getSelectionRange","startContainer","startOffset","endContainer","endOffset","wordStart","wordEnd","slice","triggerClassName","contains","activatePanel","wrapWordInMentionAt","positionPanel","updatePanelContent","getSelection","rangeCount","range","getRangeAt","cloneRange","setStart","setEnd","Math","min","element","surroundContents","removeAllRanges","addRange","select","firstChild","_activeMentionAt$getBoundingClientRect","getBoundingClientRect","bottom","left","width","_window","window","pageXOffset","pageYOffset","style","top","handleSelectMention","seletedText","textNode"],"mappings":"CAAA,SAAAA,EAAAC,GACA,mBAAAC,UAAA,gBAAAC,QACAA,OAAAD,QAAAD,EAAAG,QAAA,qBACA,sBAAAC,gBAAAC,IACAD,QAAA,gBAAAJ,OACA,CACA,GAAAM,GAAAN,EAAA,gBAAAC,SAAAE,QAAA,gBAAAJ,EAAA,aACA,QAAAQ,KAAAD,IAAA,gBAAAL,iBAAAF,GAAAQ,GAAAD,EAAAC,KAECC,KAAA,SAAAC,GACD,MCAgB,UAAUC,GCN1B,QAAAC,GAAAC,GAGA,GAAAC,EAAAD,GACA,MAAAC,GAAAD,GAAAX,OAGA,IAAAC,GAAAW,EAAAD,IACAX,WACAa,GAAAF,EACAG,QAAA,EAUA,OANAL,GAAAE,GAAAI,KAAAd,EAAAD,QAAAC,IAAAD,QAAAU,GAGAT,EAAAa,QAAA,EAGAb,EAAAD,QAvBA,GAAAY,KAqCA,OATAF,GAAAM,EAAAP,EAGAC,EAAAO,EAAAL,EAGAF,EAAAQ,EAAA,GAGAR,EAAA,KDgBM,SAAST,EAAQD,EAASU,GAE/B,YAOA,SAASS,GAAuBC,GAAO,MAAOA,IAAOA,EAAIC,WAAaD,GAAQE,UAAWF,GE1DnF,QAASG,GAAmBC,EAAIC,GACnC,GACIC,GACAC,EAFAC,EAAaJ,EAAGI,UAMpB,KAHAC,EAAA,WAAaC,KAAKC,OAAOP,EAAIC,GAE7BE,EAAcC,EAAWI,UAClBN,EAAWC,EAAYM,iBACtB,IAAMN,EAAYO,UAAY,IAAMR,EAASQ,WAC7CR,EAASS,aAAeR,EAAYQ,YACpCP,EAAWQ,YAAYT,IAE3BA,EAAcD,EFyCrBW,OAAOC,eAAetC,EAAS,cAC3BuC,OAAO,IAEXvC,EAAQuB,kBAAoBA,CAI5B,IAAIiB,GAAgB9B,EEjEI,GFmEpBmB,EAAiBV,EAAuBqB,GEjEhCC,EAAY,EFoExBzC,GAAQyC,UAAYA,CEnEd,IAAMC,GAAc,EFsE1B1C,GAAQ0C,YAAcA,CEpDhB,IAAMC,GAAYd,EAAA,WAAae,UAAUC,QAC5CC,KAAI,UAMJC,eAAc,GAMdC,qBAAoB,GAOpBC,QAAO,SAmBPC,mBAAoB,aAQpBC,oBAAqB,aAErBC,mBAAmB,KAEnBC,qBACIC,IAAG,6BACHC,IAAG,4BAGPC,gBAAiB,IAEjBC,KAAK,WACDlD,KAAKmD,mBACLnD,KAAKoD,uBAGTC,QAAQ,WACArD,KAAKsD,eACDtD,KAAKsD,aAAajC,aAClBrB,KAAK4C,oBAAoB5C,KAAKsD,cAC9BtD,KAAKsD,aAAajC,WAAWQ,YAAY7B,KAAKsD,qBAE3CtD,MAAKsD,eAIpBH,iBAAiB,WACb,GAAMlC,GAAKjB,KAAKuD,SAASC,cAAa,MAEtCvC,GAAGwC,UAAUC,IAAG,+BACZ1D,KAAKwC,gBACPvB,EAAGwC,UAAUC,IAAI1D,KAAKwC,gBAGxBxC,KAAK2D,gBAAe,qBAAsBC,YAAY3C,GAEtDjB,KAAKsD,aAAerC,GAGxBmC,oBAAoB,WACZ,MAAQpD,KAAKiD,kBAEbjD,KAAK6D,UAAS,OAAW7D,KAAK8D,WAAUC,KAAf/D,OAEzBA,KAAK6D,UAAS,QAAY7D,KAAKgE,YAAWD,KAAhB/D,QAG9BA,KAAK6D,UAAS,gBAAoB7D,KAAKiE,YAAWF,KAAhB/D,QAGtC8D,WAAW,WACH,MAAQ9D,KAAKiD,kBACbjD,KAAKkE,kBAAoBC,WAAanE,KAAKoE,UAASL,KAAd/D,MAAgBA,KAAKiD,mBAInEe,YAAY,WACJhE,KAAKkE,oBACLG,aAAarE,KAAKkE,mBAClBlE,KAAKkE,kBAAoB,OAIjCD,YAAY,SAACK,GACT,GAAMC,GAAUjD,EAAA,WAAaC,KAAKiD,WAAWF,GACvCG,EAAUF,IAAYjD,EAAA,WAAaC,KAAKgD,QAAQG,KACtD1E,MAAK2E,qBAAqBL,EAAMM,OAAQH,EAAU,GAAK,IAElDA,GAAW,KAAOzE,KAAK6C,kBAAkBgC,QAAQ7E,KAAK8E,UAAY,EAAI9E,KAAK+E,KAAKC,OACjFhF,KAAKiF,YAELjF,KAAKoE,aAIbA,UAAU,WACNpE,KAAKsD,aAAaG,UAAUyB,OAAM,sCAC9BlF,KAAKyC,sBACLzC,KAAKsD,aAAaG,UAAUyB,OAAOlF,KAAKyC,sBAGxCzC,KAAKmF,kBAELnF,KAAKoF,KAAKC,gBACVrE,EAAkBhB,KAAKmF,gBAAiBnF,KAAKuD,UAC7CvD,KAAKoF,KAAKE,mBAEVtF,KAAKmF,gBAAkB,OAI/BR,qBAAqB,SAACC,EAAQW,GAO1B,QAASC,GAAeC,EAAAC,GF+ER,IAFX,GAAIC,IAAS,EAEKA,GE/EmB,CFgFjC,GEhFiBC,GAAQH,EAAEI,EAAIH,CAC9BI,GAAQC,OFkFTJ,GAAS,CElFd,IAAMG,GAAWlE,EAAYgE,EAAW,EACxC,IAAI,MAAQE,GAAY,IAAMA,EAASE,OAAOhB,QAAU,GAAKY,GAAYhE,EAAYoD,OAASY,EAC1F,MAAOA,EFsFFH,GEpFkBG,EAAWC,EFqF7BH,EErFmCG,EFsFnCF,GAAS,GA3BrB,GAAIM,GEtE0D3E,EAAA,WAAa4E,UAAUC,kBAAkBnG,KAAKuD,UAAtG6C,EAAcH,EAAdG,eAAgBC,EAAWJ,EAAXI,YAAaC,EAAYL,EAAZK,YAAuBL,GAATM,SAClD,IAAIH,IAAmBE,EAAvB,CF+EC,GE5EM1E,GAAewE,EAAfxE,WAWP5B,MAAKwG,UAAYhB,EAAgBa,EAAcd,EAAa,IAC5DvF,KAAKyG,QAAUjB,EAAgBa,EAAcd,EAAa,GAAK,EAC/DvF,KAAK+E,KAAOnD,EAAY8E,MAAM1G,KAAKwG,UAAWxG,KAAKyG,SACnDzG,KAAK8E,QAAU9E,KAAK+E,KAAK2B,MAAM,EAAG,GAClC1G,KAAK2G,iBAAmB3G,KAAK8C,oBAAoB9C,KAAK8E,WAG1DG,UAAU,WACDjF,KAAKsD,aAAaG,UAAUmD,SAAQ,wCACrC5G,KAAK6G,gBACL7G,KAAK8G,uBAET9G,KAAK+G,gBACL/G,KAAKgH,sBAGTH,cAAc,WACV7G,KAAKsD,aAAaG,UAAUC,IAAG,sCAC3B1D,KAAKyC,sBACLzC,KAAKsD,aAAaG,UAAUC,IAAI1D,KAAKyC,uBAI7CqE,oBAAoB,WAChB,GAAMZ,GAAYlG,KAAKuD,SAAS0D,cAChC,IAAIf,EAAUgB,WAAY,CAEtB,GAAMC,GAAQjB,EAAUkB,WAAW,GAAGC,YACtCF,GAAMG,SAASH,EAAMf,eAAgBpG,KAAKwG,WAC1CW,EAAMI,OAAOJ,EAAMf,eAAgBoB,KAAKC,IAAIzH,KAAKyG,QAASU,EAAMf,eAAexE,YAAYoD,QAG3F,IAAM0C,GAAU1H,KAAKuD,SAASC,cAAcxD,KAAK0C,QACjDgF,GAAQjE,UAAUC,IAAI1D,KAAK2G,kBAC3B3G,KAAKmF,gBAAkBuC,EAEvBP,EAAMQ,iBAAiBD,GACvBxB,EAAU0B,kBACV1B,EAAU2B,SAASV,GAEnB7F,EAAA,WAAa4E,UAAU4B,OAAO9H,KAAKuD,SAAUmE,EAAQK,WAAY/H,KAAK+E,KAAKC,UAInF+B,cAAc,WFyFT,GAAIiB,GExFyBhI,KAAKmF,gBAAgB8C,wBAA5CC,EAAMF,EAANE,OAAQC,EAAIH,EAAJG,KAAMC,EAAKJ,EAALI,MF6FhBC,EE5F8BrI,KAAKsI,OAAjCC,EAAWF,EAAXE,YAAaC,EAAWH,EAAXG,WAEpBxI,MAAKsD,aAAamF,MAAMC,IAAUF,EAAcN,EAAM,KACtDlI,KAAKsD,aAAamF,MAAMN,KAAWI,EAAcJ,EAAOC,EAAK,MAGjEpB,mBAAmB,WACfhH,KAAK2C,mBAAmB3C,KAAKsD,aAActD,KAAK+E,KAAQ/E,KAAK2I,oBAAmB5E,KAAxB/D,QAG5D2I,oBAAoB,SAACC,GACjB,GAAIA,EAAa,CACb,GAAMC,GAAW7I,KAAKmF,gBAAgB4C,UACtCc,GAASjH,YAAcgH,EACvBtH,EAAA,WAAa4E,UAAU4B,OAAO9H,KAAKuD,SAAUsF,EAAUD,EAAY5D,QAEnEhF,KAAKoE,gBAELpE,MAAKoE,cFoGhB3E,GAAQ2C,UAAYA,EACpB3C,EAAQ,WE/FM2C,GFmGT,SAAS1C,EAAQD,GGxVvBC,EAAAD,QAAAQ","file":"index.min.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory(require(\"MediumEditor\"));\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([\"MediumEditor\"], factory);\n\telse {\n\t\tvar a = typeof exports === 'object' ? factory(require(\"MediumEditor\")) : factory(root[\"MediumEditor\"]);\n\t\tfor(var i in a) (typeof exports === 'object' ? exports : root)[i] = a[i];\n\t}\n})(this, function(__WEBPACK_EXTERNAL_MODULE_1__) {\nreturn \n\n\n/** WEBPACK FOOTER **\n ** webpack/universalModuleDefinition\n **/","(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory(require(\"MediumEditor\"));\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([\"MediumEditor\"], factory);\n\telse {\n\t\tvar a = typeof exports === 'object' ? factory(require(\"MediumEditor\")) : factory(root[\"MediumEditor\"]);\n\t\tfor(var i in a) (typeof exports === 'object' ? exports : root)[i] = a[i];\n\t}\n})(this, function(__WEBPACK_EXTERNAL_MODULE_1__) {\nreturn /******/ (function(modules) { // webpackBootstrap\n/******/ \t// The module cache\n/******/ \tvar installedModules = {};\n/******/\n/******/ \t// The require function\n/******/ \tfunction __webpack_require__(moduleId) {\n/******/\n/******/ \t\t// Check if module is in cache\n/******/ \t\tif(installedModules[moduleId])\n/******/ \t\t\treturn installedModules[moduleId].exports;\n/******/\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = installedModules[moduleId] = {\n/******/ \t\t\texports: {},\n/******/ \t\t\tid: moduleId,\n/******/ \t\t\tloaded: false\n/******/ \t\t};\n/******/\n/******/ \t\t// Execute the module function\n/******/ \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n/******/\n/******/ \t\t// Flag the module as loaded\n/******/ \t\tmodule.loaded = true;\n/******/\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n/******/\n/******/\n/******/ \t// expose the modules object (__webpack_modules__)\n/******/ \t__webpack_require__.m = modules;\n/******/\n/******/ \t// expose the module cache\n/******/ \t__webpack_require__.c = installedModules;\n/******/\n/******/ \t// __webpack_public_path__\n/******/ \t__webpack_require__.p = \"\";\n/******/\n/******/ \t// Load entry module and return exports\n/******/ \treturn __webpack_require__(0);\n/******/ })\n/************************************************************************/\n/******/ ([\n/* 0 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t    value: true\n\t});\n\texports.unwrapForTextNode = unwrapForTextNode;\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { \"default\": obj }; }\n\t\n\tvar _mediumEditor = __webpack_require__(1);\n\t\n\tvar _mediumEditor2 = _interopRequireDefault(_mediumEditor);\n\t\n\tvar atKeyCode = 50;\n\texports.atKeyCode = atKeyCode;\n\tvar hashKeyCode = 51;\n\t\n\texports.hashKeyCode = hashKeyCode;\n\t\n\tfunction unwrapForTextNode(el, doc) {\n\t    var parentNode = el.parentNode,\n\t        prevNode,\n\t        currentNode;\n\t    _mediumEditor2[\"default\"].util.unwrap(el, doc);\n\t    // Merge textNode\n\t    currentNode = parentNode.lastChild;\n\t    while (prevNode = currentNode.previousSibling) {\n\t        if (3 === currentNode.nodeType && 3 === prevNode.nodeType) {\n\t            prevNode.textContent += currentNode.textContent;\n\t            parentNode.removeChild(currentNode);\n\t        }\n\t        currentNode = prevNode;\n\t    }\n\t}\n\t\n\tvar TCMention = _mediumEditor2[\"default\"].Extension.extend({\n\t    name: \"mention\",\n\t\n\t    /* extraClassName: [string]\n\t     *\n\t     * Extra className to be added with the `medium-editor-mention-panel` element.\n\t     */\n\t    extraClassName: \"\",\n\t\n\t    /* extraActiveClassName: [string]\n\t     *\n\t     * Extra active className to be added with the `medium-editor-mention-panel-active` element.\n\t     */\n\t    extraActiveClassName: \"\",\n\t\n\t    /* tagName: [string]\n\t     *\n\t     * Element tag name that would indicate that this mention. It will have\n\t     * `medium-editor-mention-at` className applied on it.\n\t     */\n\t    tagName: \"strong\",\n\t\n\t    /* renderPanelContent: [function (panelEl: dom, currentMentionText: string, selectMentionCallback: function)]\n\t     *\n\t     * Render function that used to create the content of the panel when panel is show.\n\t     *\n\t     * @params panelEl: DOM element of the panel.\n\t     *\n\t     * @params currentMentionText: Often used as query criteria. e.g. @medium\n\t     *\n\t     * @params selectMentionCallback:\n\t     *      callback used in customized panel content.\n\t     *\n\t     *      When called with null, it tells the Mention plugin to close the panel.\n\t     *          e.g. selectMentionCallback(null);\n\t     *\n\t     *      When called with text, it tells the Mention plugin that the text is selected by the user.\n\t     *          e.g. selectMentionCallback(\"@mediumrocks\")\n\t     */\n\t    renderPanelContent: function renderPanelContent() {},\n\t\n\t    /* destroyPanelContent: [function (panelEl: dom)]\n\t     *\n\t     * Destroy function to remove any contents rendered by renderPanelContent before panelEl being removed from the document.\n\t     *\n\t     * @params panelEl: DOM element of the panel.\n\t     */\n\t    destroyPanelContent: function destroyPanelContent() {},\n\t\n\t    activeTriggerList: [\"@\"],\n\t\n\t    triggerClassNameMap: {\n\t        \"#\": \"medium-editor-mention-hash\",\n\t        \"@\": \"medium-editor-mention-at\"\n\t    },\n\t\n\t    hideOnBlurDelay: 300,\n\t\n\t    init: function init() {\n\t        this.initMentionPanel();\n\t        this.attachEventHandlers();\n\t    },\n\t\n\t    destroy: function destroy() {\n\t        if (this.mentionPanel) {\n\t            if (this.mentionPanel.parentNode) {\n\t                this.destroyPanelContent(this.mentionPanel);\n\t                this.mentionPanel.parentNode.removeChild(this.mentionPanel);\n\t            }\n\t            delete this.mentionPanel;\n\t        }\n\t    },\n\t\n\t    initMentionPanel: function initMentionPanel() {\n\t        var el = this.document.createElement(\"div\");\n\t\n\t        el.classList.add(\"medium-editor-mention-panel\");\n\t        if (this.extraClassName) {\n\t            el.classList.add(this.extraClassName);\n\t        }\n\t\n\t        this.getEditorOption(\"elementsContainer\").appendChild(el);\n\t\n\t        this.mentionPanel = el;\n\t    },\n\t\n\t    attachEventHandlers: function attachEventHandlers() {\n\t        if (null != this.hideOnBlurDelay) {\n\t            // for hideOnBlurDelay, the panel should hide after blur event\n\t            this.subscribe(\"blur\", this.handleBlur.bind(this));\n\t            // and clear out hide timeout if focus again\n\t            this.subscribe(\"focus\", this.handleFocus.bind(this));\n\t        }\n\t        // if the editor changes its content, we have to show or hide the panel\n\t        this.subscribe(\"editableKeyup\", this.handleKeyup.bind(this));\n\t    },\n\t\n\t    handleBlur: function handleBlur() {\n\t        if (null != this.hideOnBlurDelay) {\n\t            this.hideOnBlurDelayId = setTimeout(this.hidePanel.bind(this), this.hideOnBlurDelay);\n\t        }\n\t    },\n\t\n\t    handleFocus: function handleFocus() {\n\t        if (this.hideOnBlurDelayId) {\n\t            clearTimeout(this.hideOnBlurDelayId);\n\t            this.hideOnBlurDelayId = null;\n\t        }\n\t    },\n\t\n\t    handleKeyup: function handleKeyup(event) {\n\t        var keyCode = _mediumEditor2[\"default\"].util.getKeyCode(event);\n\t        var isSpace = keyCode === _mediumEditor2[\"default\"].util.keyCode.SPACE;\n\t        this.getWordFromSelection(event.target, isSpace ? -1 : 0);\n\t\n\t        if (!isSpace && -1 !== this.activeTriggerList.indexOf(this.trigger) && 1 < this.word.length) {\n\t            this.showPanel();\n\t        } else {\n\t            this.hidePanel();\n\t        }\n\t    },\n\t\n\t    hidePanel: function hidePanel() {\n\t        this.mentionPanel.classList.remove(\"medium-editor-mention-panel-active\");\n\t        if (this.extraActiveClassName) {\n\t            this.mentionPanel.classList.remove(this.extraActiveClassName);\n\t        }\n\t\n\t        if (this.activeMentionAt) {\n\t            // LIKE core#execAction\n\t            this.base.saveSelection();\n\t            unwrapForTextNode(this.activeMentionAt, this.document);\n\t            this.base.restoreSelection();\n\t            // LIKE core#execAction\n\t            this.activeMentionAt = null;\n\t        }\n\t    },\n\t\n\t    getWordFromSelection: function getWordFromSelection(target, initialDiff) {\n\t        var _MediumEditor$selection$getSelectionRange = _mediumEditor2[\"default\"].selection.getSelectionRange(this.document);\n\t\n\t        var startContainer = _MediumEditor$selection$getSelectionRange.startContainer;\n\t        var startOffset = _MediumEditor$selection$getSelectionRange.startOffset;\n\t        var endContainer = _MediumEditor$selection$getSelectionRange.endContainer;\n\t        var endOffset = _MediumEditor$selection$getSelectionRange.endOffset;\n\t\n\t        if (startContainer !== endContainer) {\n\t            return;\n\t        }\n\t        var textContent = startContainer.textContent;\n\t\n\t        function getWordPosition(_x, _x2) {\n\t            var _again = true;\n\t\n\t            _function: while (_again) {\n\t                var position = _x,\n\t                    diff = _x2;\n\t                prevText = undefined;\n\t                _again = false;\n\t\n\t                var prevText = textContent[position - 1];\n\t                if (null == prevText || 0 === prevText.trim().length || 0 >= position || textContent.length < position) {\n\t                    return position;\n\t                } else {\n\t                    _x = position + diff;\n\t                    _x2 = diff;\n\t                    _again = true;\n\t                    continue _function;\n\t                }\n\t            }\n\t        }\n\t\n\t        this.wordStart = getWordPosition(startOffset + initialDiff, -1);\n\t        this.wordEnd = getWordPosition(startOffset + initialDiff, 1) - 1;\n\t        this.word = textContent.slice(this.wordStart, this.wordEnd);\n\t        this.trigger = this.word.slice(0, 1);\n\t        this.triggerClassName = this.triggerClassNameMap[this.trigger];\n\t    },\n\t\n\t    showPanel: function showPanel() {\n\t        if (!this.mentionPanel.classList.contains(\"medium-editor-mention-panel-active\")) {\n\t            this.activatePanel();\n\t            this.wrapWordInMentionAt();\n\t        }\n\t        this.positionPanel();\n\t        this.updatePanelContent();\n\t    },\n\t\n\t    activatePanel: function activatePanel() {\n\t        this.mentionPanel.classList.add(\"medium-editor-mention-panel-active\");\n\t        if (this.extraActiveClassName) {\n\t            this.mentionPanel.classList.add(this.extraActiveClassName);\n\t        }\n\t    },\n\t\n\t    wrapWordInMentionAt: function wrapWordInMentionAt() {\n\t        var selection = this.document.getSelection();\n\t        if (selection.rangeCount) {\n\t            // http://stackoverflow.com/a/6328906/1458162\n\t            var range = selection.getRangeAt(0).cloneRange();\n\t            range.setStart(range.startContainer, this.wordStart);\n\t            range.setEnd(range.startContainer, Math.min(this.wordEnd, range.startContainer.textContent.length));\n\t            // Instead, insert our own version of it.\n\t            // TODO: Not sure why, but using <span> tag doens't work here\n\t            var element = this.document.createElement(this.tagName);\n\t            element.classList.add(this.triggerClassName);\n\t            this.activeMentionAt = element;\n\t            //\n\t            range.surroundContents(element);\n\t            selection.removeAllRanges();\n\t            selection.addRange(range);\n\t            //\n\t            _mediumEditor2[\"default\"].selection.select(this.document, element.firstChild, this.word.length);\n\t        }\n\t    },\n\t\n\t    positionPanel: function positionPanel() {\n\t        var _activeMentionAt$getBoundingClientRect = this.activeMentionAt.getBoundingClientRect();\n\t\n\t        var bottom = _activeMentionAt$getBoundingClientRect.bottom;\n\t        var left = _activeMentionAt$getBoundingClientRect.left;\n\t        var width = _activeMentionAt$getBoundingClientRect.width;\n\t        var _window = this.window;\n\t        var pageXOffset = _window.pageXOffset;\n\t        var pageYOffset = _window.pageYOffset;\n\t\n\t        this.mentionPanel.style.top = pageYOffset + bottom + \"px\";\n\t        this.mentionPanel.style.left = pageXOffset + left + width + \"px\";\n\t    },\n\t\n\t    updatePanelContent: function updatePanelContent() {\n\t        this.renderPanelContent(this.mentionPanel, this.word, this.handleSelectMention.bind(this));\n\t    },\n\t\n\t    handleSelectMention: function handleSelectMention(seletedText) {\n\t        if (seletedText) {\n\t            var textNode = this.activeMentionAt.firstChild;\n\t            textNode.textContent = seletedText;\n\t            _mediumEditor2[\"default\"].selection.select(this.document, textNode, seletedText.length);\n\t            //\n\t            this.hidePanel();\n\t        } else {\n\t            this.hidePanel();\n\t        }\n\t    }\n\t\n\t});\n\t\n\texports.TCMention = TCMention;\n\texports[\"default\"] = TCMention;\n\n/***/ },\n/* 1 */\n/***/ function(module, exports) {\n\n\tmodule.exports = __WEBPACK_EXTERNAL_MODULE_1__;\n\n/***/ }\n/******/ ])\n});\n;\n\n\n/** WEBPACK FOOTER **\n ** index.min.js\n **/"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n/** WEBPACK FOOTER **\n ** webpack/bootstrap e563c065def9bca6d92e\n **/","import MediumEditor from \"medium-editor\";\n\nexport const atKeyCode = 50;\nexport const hashKeyCode = 51;\n\nexport function unwrapForTextNode (el, doc) {\n    var parentNode = el.parentNode,\n        prevNode,\n        currentNode;\n    MediumEditor.util.unwrap(el, doc);\n    // Merge textNode\n    currentNode = parentNode.lastChild;\n    while (prevNode = currentNode.previousSibling) {\n        if (3 === currentNode.nodeType && 3 === prevNode.nodeType) {\n            prevNode.textContent += currentNode.textContent;\n            parentNode.removeChild(currentNode);\n        }\n        currentNode = prevNode;\n    }\n}\n\nexport const TCMention = MediumEditor.Extension.extend({\n    name: `mention`,\n\n    /* extraClassName: [string]\n     *\n     * Extra className to be added with the `medium-editor-mention-panel` element.\n     */\n    extraClassName: ``,\n\n    /* extraActiveClassName: [string]\n     *\n     * Extra active className to be added with the `medium-editor-mention-panel-active` element.\n     */\n    extraActiveClassName: ``,\n\n    /* tagName: [string]\n     *\n     * Element tag name that would indicate that this mention. It will have\n     * `medium-editor-mention-at` className applied on it.\n     */\n    tagName: `strong`,\n\n    /* renderPanelContent: [function (panelEl: dom, currentMentionText: string, selectMentionCallback: function)]\n     *\n     * Render function that used to create the content of the panel when panel is show.\n     *\n     * @params panelEl: DOM element of the panel.\n     *\n     * @params currentMentionText: Often used as query criteria. e.g. @medium\n     *\n     * @params selectMentionCallback:\n     *      callback used in customized panel content.\n     *\n     *      When called with null, it tells the Mention plugin to close the panel.\n     *          e.g. selectMentionCallback(null);\n     *\n     *      When called with text, it tells the Mention plugin that the text is selected by the user.\n     *          e.g. selectMentionCallback(\"@mediumrocks\")\n     */\n    renderPanelContent: () => {},\n\n    /* destroyPanelContent: [function (panelEl: dom)]\n     *\n     * Destroy function to remove any contents rendered by renderPanelContent before panelEl being removed from the document.\n     *\n     * @params panelEl: DOM element of the panel.\n     */\n    destroyPanelContent: () => {},\n\n    activeTriggerList: [`@`],\n\n    triggerClassNameMap: {\n        \"#\": `medium-editor-mention-hash`,\n        \"@\": `medium-editor-mention-at`,\n    },\n\n    hideOnBlurDelay: 300,\n\n    init () {\n        this.initMentionPanel();\n        this.attachEventHandlers();\n    },\n\n    destroy () {\n        if (this.mentionPanel) {\n            if (this.mentionPanel.parentNode) {\n                this.destroyPanelContent(this.mentionPanel);\n                this.mentionPanel.parentNode.removeChild(this.mentionPanel);\n            }\n            delete this.mentionPanel;\n        }\n    },\n\n    initMentionPanel () {\n        const el = this.document.createElement(`div`);\n\n        el.classList.add(`medium-editor-mention-panel`);\n        if (this.extraClassName) {\n          el.classList.add(this.extraClassName);\n        }\n\n        this.getEditorOption(`elementsContainer`).appendChild(el);\n\n        this.mentionPanel = el;\n    },\n\n    attachEventHandlers () {\n        if (null != this.hideOnBlurDelay) {\n            // for hideOnBlurDelay, the panel should hide after blur event\n            this.subscribe(`blur`, ::this.handleBlur);\n            // and clear out hide timeout if focus again\n            this.subscribe(`focus`, ::this.handleFocus);\n        }\n        // if the editor changes its content, we have to show or hide the panel\n        this.subscribe(`editableKeyup`, ::this.handleKeyup);\n    },\n\n    handleBlur () {\n        if (null != this.hideOnBlurDelay) {\n            this.hideOnBlurDelayId = setTimeout(::this.hidePanel, this.hideOnBlurDelay);\n        }\n    },\n\n    handleFocus () {\n        if (this.hideOnBlurDelayId) {\n            clearTimeout(this.hideOnBlurDelayId);\n            this.hideOnBlurDelayId = null;\n        }\n    },\n\n    handleKeyup (event) {\n        const keyCode = MediumEditor.util.getKeyCode(event);\n        const isSpace = keyCode === MediumEditor.util.keyCode.SPACE;\n        this.getWordFromSelection(event.target, isSpace ? -1 : 0);\n\n        if (!isSpace && -1 !== this.activeTriggerList.indexOf(this.trigger) && 1 < this.word.length) {\n            this.showPanel();\n        } else {\n            this.hidePanel();\n        }\n    },\n\n    hidePanel () {\n        this.mentionPanel.classList.remove(`medium-editor-mention-panel-active`);\n        if (this.extraActiveClassName) {\n            this.mentionPanel.classList.remove(this.extraActiveClassName);\n        }\n\n        if (this.activeMentionAt) {\n            // LIKE core#execAction\n            this.base.saveSelection();\n            unwrapForTextNode(this.activeMentionAt, this.document);\n            this.base.restoreSelection();\n            // LIKE core#execAction\n            this.activeMentionAt = null;\n        }\n    },\n\n    getWordFromSelection (target, initialDiff) {\n        const {startContainer, startOffset, endContainer, endOffset} = MediumEditor.selection.getSelectionRange(this.document);\n        if (startContainer !== endContainer) {\n            return;\n        }\n        const {textContent} = startContainer;\n\n        function getWordPosition (position, diff) {\n            const prevText = textContent[position - 1];\n            if (null == prevText || 0 === prevText.trim().length || 0 >= position || textContent.length < position) {\n                return position;\n            } else {\n                return getWordPosition(position + diff, diff);\n            }\n        }\n\n        this.wordStart = getWordPosition(startOffset + initialDiff, -1);\n        this.wordEnd = getWordPosition(startOffset + initialDiff, 1) - 1;\n        this.word = textContent.slice(this.wordStart, this.wordEnd);\n        this.trigger = this.word.slice(0, 1);\n        this.triggerClassName = this.triggerClassNameMap[this.trigger];\n    },\n\n    showPanel () {\n        if (!this.mentionPanel.classList.contains(`medium-editor-mention-panel-active`)) {\n            this.activatePanel();\n            this.wrapWordInMentionAt();\n        }\n        this.positionPanel();\n        this.updatePanelContent();\n    },\n\n    activatePanel () {\n        this.mentionPanel.classList.add(`medium-editor-mention-panel-active`);\n        if (this.extraActiveClassName) {\n            this.mentionPanel.classList.add(this.extraActiveClassName);\n        }\n    },\n\n    wrapWordInMentionAt () {\n        const selection = this.document.getSelection();\n        if (selection.rangeCount) {\n            // http://stackoverflow.com/a/6328906/1458162\n            const range = selection.getRangeAt(0).cloneRange();\n            range.setStart(range.startContainer, this.wordStart);\n            range.setEnd(range.startContainer, Math.min(this.wordEnd, range.startContainer.textContent.length));\n            // Instead, insert our own version of it.\n            // TODO: Not sure why, but using <span> tag doens't work here\n            const element = this.document.createElement(this.tagName);\n            element.classList.add(this.triggerClassName);\n            this.activeMentionAt = element;\n            //\n            range.surroundContents(element);\n            selection.removeAllRanges();\n            selection.addRange(range);\n            //\n            MediumEditor.selection.select(this.document, element.firstChild, this.word.length);\n        }\n    },\n\n    positionPanel () {\n        const {bottom, left, width} = this.activeMentionAt.getBoundingClientRect();\n        const {pageXOffset, pageYOffset} = this.window;\n\n        this.mentionPanel.style.top = `${ pageYOffset + bottom }px`;\n        this.mentionPanel.style.left = `${ pageXOffset + left + width }px`;\n    },\n\n    updatePanelContent () {\n        this.renderPanelContent(this.mentionPanel, this.word, ::this.handleSelectMention);\n    },\n\n    handleSelectMention (seletedText) {\n        if (seletedText) {\n            const textNode = this.activeMentionAt.firstChild;\n            textNode.textContent = seletedText;\n            MediumEditor.selection.select(this.document, textNode, seletedText.length);\n            //\n            this.hidePanel();\n        } else {\n            this.hidePanel();\n        }\n    },\n\n});\n\nexport default TCMention;\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/index.js\n **/","module.exports = __WEBPACK_EXTERNAL_MODULE_1__;\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external \"MediumEditor\"\n ** module id = 1\n ** module chunks = 0\n **/"],"sourceRoot":""}